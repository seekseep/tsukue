<!-- index.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>TAKASHI|SAMPLE</title>
	<style>
		*{
			font-size: 12px;
			line-height: 180%;
		}
	</style>
</head>
<body>
	<div id="first_page" class="page">
		<input type="text" name="room" placeholder="ROOM NAME">
		<input type="text" name="user" placeholder="PLAYER NAME">
		<input type="button" name="enter_button" value="enter">
	</div>
	<div id="second_page" class="page">
		<div id="information">
			<div id="room_info">
				<h1>ROOM NAME</h1>
				<p id="lb_room_name"></p>
			</div>
			<div id="player_info">
				<h1>ROOM NAME</h1>
				<p id="lb_player_name"></p>
			</div>
		</div>
		<div id="status">
			<div class="player" id="player_XXXX">
				<h2 class="player_name"></h2>
			</div>
		</div>
	</div>
	<script src="js/jquery-2.1.1.min.js"></script>
	<!-- <script src="/socket.io.js"></script> -->
	<script>

	var updateUsers, makeUser;

	$(document).ready(function(){

		// var socket = new io();

		function enterRoom(user, room){
			if(user !== undefined && room !== undefined){
				var data = {};
				data.user = user;
				data.room = room;
				// socket.json.emit('enterRoom', data);

				$('#lb_room_name').html(room);
				$('#lb_player_name').html(user);
			}
		}

		/*
		[
			{
				"name" : "NAME",
				"items": [1,2,4,5,6,7,88,9];
			},
			{
				"name" : "NAME",
				"items": [1,2,4,5,6,7,88,9];
			},
			{
				"name" : "NAME",
				"items": [1,2,4,5,6,7,88,9];
			},
		]
		*/

		updateUsers = function(users){
			console.log('update USers');
			$('#status').html('');
			console.log(users);
			for(var i = 0, l = users.length; i < l; i++){
				makeUser(users[i]);
			}

		}

		makeUser = function(user){
			console.log(user.name, user.items);
			$('<div id="user_' + user.name + '"><h1>' + user.name + '</h1><ul></ul></div>').appendTo('#status');

			var items = user.items;
			for(var i = 0, l = items.length; i < l; i++){
				console.log($('#user_'+user.name+' ul'));
				$('<li>').text(user.items[i]).appendTo('#user_'+user.name+' ul');
			}
		}

		// ==================
		$('#first_page').show();
		$('#second_page').hide();

		// ==================
		$('[name=enter_button]').click(function(){
			var user = $('[name=user]').val();
			var room = $('[name=room]').val();

			if(room !== '' && user !== ''){
				console.log(room, user)
				enterRoom(user, room);
				$('#first_page').hide();
				$('#second_page').show();
			}
		})

	});
	</script>	
</body>
</html>